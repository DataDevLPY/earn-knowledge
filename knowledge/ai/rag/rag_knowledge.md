[TOC]



## RAG 主要流程

* RAG (Retrieval Augmented Generation， 检索增强生成) 
* 大模型有两个缺点：
  * 知识有滞后性：不知道最近发生的新闻
  * 不懂内部机密：没看过公司内部文档
* **Retrieval（检索）**：用户提问时，先不去问大模型，而是先从向量库，把和问题相关的资料片段找出来。

* **Augmented（增强）**：把用户的问题和检索出来的资料缝合在一起，形成一个信息量更大的提示词（Prompt）。
* **Generation（生成）**：把这个缝合好的提示词喂给大模型，生成准确的答案。



## RAG中的Rerank

* Retrieval（初步检索）/ Rerank（重排序）
* Rerank的核心价值就是在**速度**和**精度**间做了一个平衡。先用向量保速度，再用Rerank保精度。
* Rerank能够利用更高级的模型捕捉查询与文档之间的语义联系，从而剔除无关文档
* 常见的Rerank模型
  * BAAI / bge-reranker-base （开源）[https://huggingface.co/BAAI/bge-reranker-base]



## 混合检索 / 多路召回 / 融合检索

混合检索是指在RAG的过程中，结合向量检索和关键词检索进行互补，从而提高检索结果的全面性和准确性。

* 混合检索通过并行两种检索实现：
  * **向量检索：**将文本转化为高维向量，计算语义相似度。
  * **关键词检索：**基于倒排索引、BM25等算法，精确匹配关键词。
  * 两种结果通过权重融合或Rerank模型合并，输出最优答案。



